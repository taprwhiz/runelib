import assert from "assert";
import { Runestone } from "../../dist";
import { Transaction } from "bitcoinjs-lib";


const EtchingRawTx = '020000000001018ff853e0bbfb208151cc27b65384c16612457ce19fe776447023f7315424cd0e0000000000fdffffff030000000000000000246a5d21020304cb99b3a0c697b69988fade9ab8060300057406000ac0de810a08904e16012202000000000000225120af942104872a54b2777a9a04cc779f1e74c6216659183492a4692f88ebcdf19f2705000000000000160014b19423a162f7f8c1cf3a15fccced55512250d12b03409cd3a362e02dabe10ce7a78b6f154c56b6f0f48e65ef9a70879a2ba09b5c71586ec733981f97cd1ab493379e47cc848b1cd92d3b82bbb0c1f5a0e5badea1fe423220960979298572fb6aa526cfe9234dabff13275d24290a9511ebb4e9c741888fc9ac00630ccbcc0c64bcd83208bd5783336821c03c6eb81bfd2b839730af5669695bacad78438a75563bb61c44eecc58a2dc0ef000000000';

const tx = Transaction.fromHex(EtchingRawTx);

console.log('tx:', tx.getId())

const stone = Runestone.decipher(EtchingRawTx).value() as Runestone;



const s = stone.encipher();


assert.strictEqual("6a5d21020304cb99b3a0c697b69988fade9ab8060300057406000ac0de810a08904e1601", s.toString('hex'))
console.log('stone', s.toString('hex'))




// const mintRawTx = '020000000001044c4c3539d38616b57eacb746eb017805919236a6bacd7ac80749c9da322b3a700100000000fdffffff1fc9c07a91c93c1f8dbfdc8a00495b549b7b7a484986198b0d01084aa5a7a4620200000000fdffffffa5558420cbda07d214b4ee6704816be2911a2ed29a8937cbf3aed01ab841a4050100000000fdffffffaafa07ffe66e4e1b232e40f20b6acbcdd46a05e768783ba9189772d56c65d07e0100000000fdffffff0300000000000000000b6a5d0814f9ec9d0114f1071027000000000000225120876ef2f0c14c3034e40face8b72b339bafbf17fadf5de03ce270e1055bf97db44d91f20500000000225120e25da55b8349179e164f014f608e48dd300b802f0ab4dc9db207db117d0369c801404547b9df8d26b2141663e3b7b5d80a48f63ed4374b54782f3b68e03f72490664ab633d7153c98c586daf9ded8d0df01abb76d04935e489dc5779830f1dcafb820140cd94dd4396a35b1a39d88a472105c17603434c56d0652ea3cae91d8ef024a735bc8160f4b3c00509ca3a7e42c36c925afbeb0c672db0211bd60042200ab29cec01408feb133125bfba4063be83a83e9ae1b1d88220de61e8b5ea316411c1b2be37d3e8823a8451404a242250d5a87891641dce3d6b786f1b2c29a71fb1b02e61e46501405a619e894c3df074fb8908bccd028af55101c5d4a864bd1b73a3e9c49eb1747c9347f357aa16a13afcacb27f42c5febcfa0082b49015f23cf8b8575ae2fcedaa00000000';


// const mintStone = Runestone.decipher(mintRawTx).value() as Runestone;


// console.log('stone', mintStone)
// const sm = Runestone.encipher(mintStone);


// console.log('mint stone ', sm.toString('hex'))



